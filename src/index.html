<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title> V Chess Board </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="/">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300&Fredoka:wght@300&family=Poppins:wght@300&display=swap" rel="stylesheet">

    <style>
body, input {
  padding: 0;
  margin: 0;
  font-family: 'DM Mono', monospace;
}

#app {
  margin: auto;
  display: flex;
  justify-content: center;
  position: relative;
  width: min(100vw, 100vh);
  aspect-ratio: 1/1;
}
    </style>
  </head>
  <body>
    <div id='app' class='is2d'></div>
    <script>

      document.addEventListener("DOMContentLoaded", () => {
              let api = VChessboard(document.getElementById('app'), {})

              let files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
              let pawns = files.flatMap(file => [`bk@${file}8`, `bp@${file}7~`])


              let replay =[ 
                      ['wp@e2', 'wp@f2', 'wp@f3', 'wp@g2', 'wp@h2', 'wp@g3~', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f3', 'wp@g2', 'wp@h2', 'wp@g3~', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2~', 'wp@f3', 'wp@g2', 'wp@h2', 'wp@g3', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f3', 'wp@g2', 'wp@h2', 'wp@g3~', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f3', 'wp@g2', 'wp@h2', 'wp@g3~', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f3', 'wp@h2', 'wp@g3', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f3', 'wp@h2', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@h2', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f2', 'wp@f1', 'wp@g1'],
              ['wp@e2', 'wp@f1', 'wp@g1'],
              ['wp@f1', 'wp@g1']]


              function step(arr) {

                      let res = arr.pop()
                      if (!res) {
                              return
                            }

                      setTimeout(() => {
                              api.pieses = res
                              step(arr)
                            }, 100)
                    }

              step(replay.reverse())

              let ors = ['w', 'b']
              let i = 0
              setInterval(() => {
                      api.orientation = ors[i]
                      i = (i + 1) % ors.length
                    }, 500)

              setTimeout(() => {
                  api.orientation = 'b'
                //      api.pieses = ['wb@c2', 'wb@d3']
                setTimeout(() => {
                  //api.pieses = ['wb@c2', 'wb@d3']
                }, 2000)
               }, 1000)
        api.squares = ['dark white@b1', 'black@c3', 'orange@h8', 'black@c3', 'black@c3', 'black@c3', 'orange@c3', 'orange@h8']
      })
    </script>
  </body>
</html>
